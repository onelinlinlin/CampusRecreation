<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.css"/>
    <script src="/bootstrap/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/bootstrap/js/sweetalert.min.js" type="text/javascript" charset="utf-8"></script>

    <!--bootstrap 日期插件-->
    <script src="/bootstrap/js/bootstrap-datetimepicker.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap-datetimepicker.css"/>
    <script src="/bootstrap/js/bootstrap-datetimepicker.zh-CN.js" type="text/javascript" charset="utf-8"></script>

    <style>
        #bread { margin-top: 5px;}
        #movieadd {text-align: center; color: #122b40;}
        #form {
            position: relative;
            left: 30%;
            top: 30%;
        }
    </style>

    <script>

        $(function () {

            /*bootstrap时间选择插件*/
            $('#showtime').datetimepicker({
                forceParse: 0, //设置为0，时间不会跳转为1899
                language: 'zh-CN' , //显示中文
                format: 'yyyy-mm-dd', //显示格式
                minView: "month", //显示到月份
                initialDate: new Date(), //初始化当前的日期
                autoclose: true, //选中自动关闭
                todayBtn: true //显示当日按钮
            });


            //信息添加
            $('#submitBtn').click(function () {
                var moviename = $('#moviename').val();
                var director = $('#director').val();
                var language = $('#language').val();
                var showtime = $('#showtime').val();
                var duration = $('#duration').val();
                var actor = $('#actor').val();
                var briefintro = $('#briefintro').val();

                if ( moviename != "" && director != "" && language != "" && showtime != "" && duration != ""  && actor != "" && briefintro != "") {

                    $.ajax({
                        url: "/movie/addnewmovie",
                        type:"post",
                        data: {
                            "moviename": moviename,
                            "director": director,
                            "language" : language,
                            "showtime" :showtime,
                            "duration" : duration,
                            "actor" :actor,
                            "briefintro": briefintro
                        },
                        async:false,
                        success: function (data) {
                            if (data == "操作成功") {
                                swal({
                                    title: "提示",
                                    text: "添加电影信息成功",
                                    icon: "success",
                                    showConfirmButton: true
                                });

                                $('#moviename').val("");
                                $('#director').val("");
                                $('#language').val("");
                                $('#showtime').val("");
                                $('#duration').val("");
                                $('#actor').val("");
                                $('#briefintro').val("");

                            } else {
                                swal({
                                    title: "提示",
                                    text: "添加电影信息失败",
                                    icon: "error",
                                    showConfirmButton: true
                                });
                            }
                        }
                    });

                } else {
                    swal({
                        title: "提示",
                        text: "有信息未填写",
                        icon: "error",
                        showConfirmButton: true
                    });
                }

            });

        });


    </script>

</head>

<body>

<div id="mainbody">

    <!--面包屑导航开始-->
    <ul class="breadcrumb" id="bread">当前位置：
        <li>后台管理</li>
        <li>电影管理</li>
        <li>添加电影</li>
    </ul>

    <div class="page-header" id="movieadd">
        <h3>添加电影</h3>
    </div>


    <div id="form" class="form-horizontal" role="form">

        <div class="form-group">
            <label for="moviename" class="col-sm-2 control-label">电影名称</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="moviename" name="moviename" placeholder="请输入电影名称">
            </div>
        </div>

        <div class="form-group">
            <label for="director" class="col-sm-2 control-label">导演</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="director" name="director" placeholder="请输入导演">
            </div>
        </div>

        <div class="form-group">
            <label for="language" class="col-sm-2 control-label">语言</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="language" name="language" placeholder="请输入语言">
            </div>
        </div>

        <div class="form-group">
            <label for="showtime" class="col-sm-2 control-label">上映时间</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="showtime" name="showtime" placeholder="请输入上映时间">
            </div>
        </div>

        <div class="form-group">
            <label for="duration" class="col-sm-2 control-label">电影时长</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="duration" name="duration" placeholder="请输入电影时长">
            </div>
        </div>

        <div class="form-group">
            <label for="actor" class="col-sm-2 control-label">主演</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="actor" name="actor" placeholder="请输入主演">
            </div>
        </div>

        <div class="form-group">
            <label for="briefintro" class="col-sm-2 control-label">电影简介</label>
            <div class="col-sm-3">
                <textarea id="briefintro" class="form-control" name="briefintro" rows="6"></textarea>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" id="submitBtn" class="btn btn-default">提交电影信息</button>
            </div>
        </div>

    </div>

</div>

</body>

</html>
